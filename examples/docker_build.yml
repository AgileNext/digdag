run: +main

+main:
  docker:
    image: ubuntu:14.04
    build:
      - apt-get update -y
      - apt-get install -y curl nodejs npm
      - curl -o scrape https://github.com/jeroenjanssens/data-science-at-the-command-line/blob/master/tools/scrape
      - chmod +x scrape
      - npm install -g xml2json-command
  sh>: >
    curl -s 'http://en.wikipedia.org/wiki/List_of_countries_and_territories_by_border/area_ratio' |
    scrape -be 'table.wikitable > tr:not(:first-child)' |
    xml2json |
    jq -c '.html.body.tr[] | {country: .td[1][], border: .td[2][], surface: .td[3][], ratio: .td[4][]}' |
    head
